<div class="tab-controls-actions">
<!--    <div class="export-import-section">-->
<!--        <div class="export-section">-->
<!--            <select [(ngModel)]="exportFormat" class="export-select">-->
<!--                <option value="html">Экспорт в HTML</option>-->
<!--                <option value="pdf">Экспорт в PDF</option>-->
<!--            </select>-->
<!--            <button (click)="exportFile()" class="export-btn">Экспортировать</button>-->
<!--        </div>-->
<!--        <div class="import-section">-->
<!--            <select [(ngModel)]="importFormat" class="import-select">-->
<!--                <option value="html">Импорт из HTML</option>-->
<!--                <option value="pdf">Импорт из PDF</option>-->
<!--            </select>-->
<!--            <button (click)="importFile()" class="import-btn">Импортировать</button>-->
<!--        </div>-->
<!--    </div>-->

    <div class="actions">
        <div class="view-list">
            <div class="view-item" [style.background]="view === MarkdownView.ONE_SIDE ? 'var(--text-color)' : 'transparent'">
                <img src="assets/icons/svg/view/one-page.svg" (click)="onOneSide()">
            </div>
            <div class="view-item" [style.background]="view === MarkdownView.TWO_SIDE ? 'var(--text-color)' : 'transparent'">
                <img src="assets/icons/svg/view/two-page.svg" (click)="onTwoSide()">
            </div>
        </div>
        
        <div class="parameters">
            <img src="assets/icons/svg/actions/parameters.svg" (click)="onRightClick($event)">
            <app-context-menu *ngIf="showContextMenu" [items]="MarkdownSettingsMenuItems" [x]="menuX" [y]="menuY" (close)="onMenuClose()"></app-context-menu>
        </div>
        <button (click)="speak('female')">Озвучить</button>
    </div>
</div>

<div class="tab-controls-editor">
    <div class="editor-container" *ngIf="view === MarkdownView.TWO_SIDE">
<!--        <div class="line-numbers">-->
<!--            <span *ngFor="let number of lineNumbers" [class.active-line]="number === currentLine">{{ number }}</span>-->
<!--        </div>-->
        <textarea
                class="editor-textarea"
                [(ngModel)]="content"
                (input)="onContentChange($event)"
                (keyup)="onCursorMove($event)"
                (click)="onCursorMove($event)"
                [value]="MarkdownSettingsMenuItems[0].select ? renderedContent : content"
                placeholder="Введите Markdown здесь..."></textarea>
        <div class="rendered-content" [innerHTML]="renderedContent"></div>
    </div>

    <div class="editor-container" *ngIf="view === MarkdownView.ONE_SIDE">
<!--        <div class="line-numbers">-->
<!--            <span *ngFor="let number of lineNumbers" [class.active-line]="number === currentLineIndex + 1">{{ number }}</span>-->
<!--        </div>-->
        <div #editorRef class="one-side-editor" tabindex="0">
            <ng-container *ngFor="let line of lines; let i = index">
                <div
                        *ngIf="i !== currentLineIndex && MarkdownSettingsMenuItems[0].select"
                        class="rendered"
                        (click)="onLineClick(i)"
                        [textContent]="renderLine(line)"
                ></div>
                <div
                        *ngIf="i !== currentLineIndex && !MarkdownSettingsMenuItems[0].select"
                        class="rendered"
                        [innerHTML]="renderLine(line)"
                        (click)="onLineClick(i)"
                ></div>
                <input
                        *ngIf="selectAllMode || i === currentLineIndex"
                        [value]="!MarkdownSettingsMenuItems[0].select ? line : renderLine(line)"
                        (input)="onInput($event)"
                        (blur)="onBlur($event)"
                        class="editor-input"
                        spellcheck="true"
                        autofocus
                        (keydown)="onInputKeyDown($event)"
                />
            </ng-container>
        </div>
    </div>
</div>

<div class="tab-controls-info">
    <div class="info">
        <span>{{ filePath }}</span>
    </div>
    <div class="info">
        <span>Символов: {{ statistics.characterCount }}</span>
        <span>Слов: {{ statistics.wordCount }}</span>
        <span>Строк: {{ statistics.lineCount }}</span>
        <span>Время чтения: {{ statistics.readingTime }}</span>
        <span>Заголовков: {{ statistics.headingCount }}</span>
    </div>
</div>

<app-audio-track
        *ngIf="showAudioTrack"
        [text]="content"
        [gender]="currentGender"
        (closed)="hideAudioTrack()">
</app-audio-track>